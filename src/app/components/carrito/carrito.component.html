<div class="container mt-4">
  <h3 class="text-center mb-4">Carrito de Venta</h3>

  <!-- Tabla de productos en el carrito -->
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>Producto</th>
        <th>Cantidad</th>
        <th>Precio Unitario</th>
        <th>Subtotal</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let producto of carrito">
        <td>{{ producto.especie }}</td>
        <td>
          <input
            type="number"
            [(ngModel)]="producto.cantidad"
            (change)="actualizarCantidad(producto)"
            min="1"
            class="form-control"
          />
        </td>
        <td>{{ producto.precio_venta | currency: "BOB" }}</td>
        <td>
          {{ producto.precio_venta * producto.cantidad | currency: "BOB" }}
        </td>
        <td>
          <button
            class="btn btn-danger btn-sm"
            (click)="eliminarDelCarrito(producto.id)"
          >
            Eliminar
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Total -->
  <div class="mt-3">
    <strong>Total: {{ calcularTotal() | currency: "BOB" }}</strong>
  </div>

  <!-- Datos del cliente -->
  <div class="row mt-4">
    <div class="col-md-6">
      <div class="form-group mb-3">
        <label for="nombre_cliente">Nombre del Cliente</label>
        <input
          id="nombre_cliente"
          type="text"
          class="form-control"
          [(ngModel)]="nombreCliente"
          placeholder="Ingrese el nombre"
        />
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-group mb-3">
        <label for="ci_nit">CI/NIT</label>
        <input
          id="ci_nit"
          type="text"
          class="form-control"
          [(ngModel)]="ciNit"
          placeholder="Ingrese el CI o NIT"
        />
      </div>
    </div>
  </div>

  <!-- Tipo de comprobante -->
  <div class="form-group mb-3">
    <label for="tipo_comprobante">Tipo de Comprobante</label>
    <select
      id="tipo_comprobante"
      class="form-control"
      [(ngModel)]="tipoComprobante"
    >
      <option value="factura">Factura</option>
      <option value="recibo">Recibo</option>
    </select>
  </div>

  <!-- Selecci√≥n de sucursal -->
  <div class="form-group mb-4">
    <label for="sucursal">Sucursal</label>

    <select
      id="sucursal"
      class="form-control"
      [(ngModel)]="sucursalSeleccionada"
    >
      <option *ngFor="let sucursal of sucursal" [value]="sucursal.id">
        {{ sucursal.nombre }}
      </option>
    </select>
  </div>

  <!-- Botones -->
  <div class="d-flex gap-3">
    <!-- Botones de acciones -->
    <div class="mb-3 text-end">
      <button class="btn btn-outline-danger me-2" (click)="vaciarCarrito()">
        üóëÔ∏è Vaciar Carrito
      </button>
      <button class="btn btn-outline-primary me-2" (click)="irAProductos()">
        üîÑ Volver a Productos
      </button>
      <!-- Bot√≥n Vender -->
      <button class="btn btn-outline-success" (click)="vender()">
        üí∞ Vender
      </button>
    </div>
  </div>
</div>
